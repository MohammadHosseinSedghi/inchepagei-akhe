<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Will you be my Valentine?</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#ffdde1;
      --bg2:#ee9ca7;
      --bg3:#f7c9ff;
      --ink:#231f2e;
      --glass:#ffffffb3;
      --accent:#ff3d7f;
      --accent2:#7c3aed;
      --shadow: 0 20px 60px rgba(20, 10, 30, .18);
      --ring: 0 0 0 10px rgba(255, 61, 127, .12);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      overflow:hidden;
      background:
        radial-gradient(900px 700px at 10% 20%, var(--bg3), transparent 55%),
        radial-gradient(900px 700px at 90% 80%, var(--bg2), transparent 55%),
        linear-gradient(135deg, var(--bg1), #fff0f6 45%, #f3e8ff);
    }

    .noise{
      pointer-events:none;
      position:fixed; inset:0;
      opacity:.06;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.7'/%3E%3C/svg%3E");
      mix-blend-mode:soft-light;
    }

    .wrap{
      position:relative;
      height:100%;
      display:grid;
      place-items:center;
      padding:24px;
    }

    .card{
      width:min(760px, 92vw);
      border-radius:28px;
      background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.62));
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.7);
      padding: 34px 26px;
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
    }

    .glow{
      position:absolute; inset:-80px;
      background:
        radial-gradient(520px 300px at 20% 10%, rgba(255,61,127,.30), transparent 62%),
        radial-gradient(560px 340px at 80% 80%, rgba(124,58,237,.24), transparent 64%);
      filter: blur(10px);
      opacity:.95;
      pointer-events:none;
    }

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      margin-bottom:18px;
      position:relative;
      z-index:2;
      flex-wrap:wrap;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:999px;
      background: rgba(255,255,255,.78);
      border:1px solid rgba(255,255,255,.9);
      box-shadow: 0 10px 24px rgba(10, 10, 30, .08);
      font-weight:600;
      font-size:14px;
    }

    .dot{
      width:10px; height:10px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, var(--accent));
      box-shadow: 0 0 0 6px rgba(255,61,127,.12);
    }

    h1{
      font-family: "Playfair Display", serif;
      font-size: clamp(34px, 4.6vw, 54px);
      line-height:1.05;
      margin: 12px 0 10px;
      letter-spacing:-.02em;
      position:relative;
      z-index:2;
    }

    .sub{
      font-size:16px;
      line-height:1.55;
      opacity:.9;
      margin: 0 0 18px;
      position:relative;
      z-index:2;
    }

    .hint{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:14px;
      background: rgba(255,255,255,.66);
      border: 1px solid rgba(255,255,255,.86);
      font-size:14px;
      opacity:.95;
      position:relative;
      z-index:2;
    }

    .hint kbd{
      font-family: inherit;
      font-weight:700;
      background: rgba(255,61,127,.12);
      border: 1px solid rgba(255,61,127,.22);
      padding: 2px 8px;
      border-radius: 10px;
    }

    .actions{
      margin-top: 22px;
      display:flex;
      gap:14px;
      flex-wrap:wrap;
      align-items:center;
      position:relative;
      z-index:2;
    }

    .btn{
      border:0;
      padding: 14px 18px;
      border-radius: 999px;
      font-weight:800;
      font-size:16px;
      cursor:pointer;
      transition: transform .15s ease, filter .15s ease, box-shadow .15s ease, opacity .2s ease;
      user-select:none;
      position:relative;
      will-change: transform;
    }
    .btn:active{ transform: translateY(1px) scale(.99); }

    .yes{
      color:white;
      background: linear-gradient(135deg, var(--accent), #ff7aa6);
      box-shadow: 0 16px 34px rgba(255,61,127,.28);
    }
    .yes:hover{ filter:saturate(1.08) brightness(1.02); transform: translateY(-1px); }

    .maybe{
      color: var(--ink);
      background: rgba(255,255,255,.80);
      border: 1px solid rgba(255,255,255,.95);
      box-shadow: 0 16px 30px rgba(10,10,30,.10);
    }
    .maybe:hover{ transform: translateY(-1px); }

    .lovebar{
      margin-top: 18px;
      height: 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(255,255,255,.78);
      overflow:hidden;
      position:relative;
      z-index:2;
    }
    .fill{
      height:100%;
      width: 14%;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(255,61,127,.92), rgba(124,58,237,.78));
      box-shadow: var(--ring);
      transition: width .4s ease;
    }

    .garden{
      margin-top: 16px;
      display:grid;
      grid-template-columns: repeat(6, 1fr);
      gap:12px;
      position:relative;
      z-index:2;
    }

    .seed{
      aspect-ratio: 1 / 1;
      border-radius: 18px;
      background: rgba(255,255,255,.58);
      border: 1px solid rgba(255,255,255,.86);
      box-shadow: 0 12px 26px rgba(10,10,30,.08);
      display:grid;
      place-items:center;
      position:relative;
      overflow:hidden;
      cursor:pointer;
      transform: translateZ(0);
      transition: transform .18s ease, background .18s ease;
    }
    .seed:hover{ transform: translateY(-3px); background: rgba(255,255,255,.78); }

    .seed span{
      font-size: 18px;
      opacity:.92;
      transition: transform .2s ease, opacity .2s ease;
    }

    .seed .note{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      padding:10px;
      text-align:center;
      font-weight:800;
      font-size:13px;
      opacity:0;
      transform: translateY(8px);
      transition: opacity .2s ease, transform .2s ease;
      color: rgba(35, 31, 46, .92);
    }
    .seed:hover .note{ opacity:1; transform: translateY(0); }
    .seed:hover span{ opacity:.22; transform: scale(.96); }

    .footer{
      margin-top: 16px;
      font-size: 13px;
      opacity:.74;
      position:relative;
      z-index:2;
    }

    .floaters{
      position:fixed; inset:0;
      pointer-events:none;
      overflow:hidden;
    }
    .floater{
      position:absolute;
      font-size: 18px;
      opacity:.55;
      animation: drift linear infinite;
      transform: translateY(110vh);
    }
    @keyframes drift{
      from { transform: translateY(110vh) translateX(0) rotate(0deg); }
      to   { transform: translateY(-20vh) translateX(45px) rotate(24deg); }
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 22px;
      transform: translateX(-50%);
      padding: 12px 14px;
      border-radius: 16px;
      background: rgba(255,255,255,.82);
      border: 1px solid rgba(255,255,255,.92);
      box-shadow: 0 18px 40px rgba(10,10,30,.16);
      display:flex;
      align-items:center;
      gap:10px;
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease, transform .25s ease;
      z-index:10;
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-6px);
    }

    .confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:30;
    }
    .piece{
      position:absolute;
      width:10px; height:14px;
      border-radius: 3px;
      opacity:.92;
      animation: fall linear forwards;
    }
    @keyframes fall{
      to { transform: translateY(110vh) rotate(560deg); opacity:.98; }
    }

    /* LOVE LETTER OVERLAY */
    .letterWrap{
      position:fixed;
      inset:0;
      display:grid;
      place-items:center;
      padding:24px;
      background: rgba(20,10,30,.25);
      opacity:0;
      pointer-events:none;
      transition: opacity .3s ease;
      z-index:50;
    }
    .letterWrap.show{
      opacity:1;
      pointer-events:auto;
    }

    .envelope{
      position:relative;
      width:min(560px, 92vw);
      height:360px;
    }

    .envelope .body{
      position:absolute;
      inset:0;
      background: linear-gradient(135deg,#fff,#ffe9f3);
      border-radius:18px;
      box-shadow: 0 30px 80px rgba(0,0,0,.25);
      border: 1px solid rgba(35,31,46,.10);
    }

    .envelope .flap{
      position:absolute;
      top:0;
      left:0;
      right:0;
      height:190px;
      background: linear-gradient(135deg,#ffb3d1,#ff6fa6);
      clip-path: polygon(0 0,100% 0,50% 100%);
      transform-origin: top;
      transition: transform .6s ease;
      border-top-left-radius:18px;
      border-top-right-radius:18px;
    }

    .letter{
      position:absolute;
      left:18px;
      right:18px;
      top:44px;
      bottom:18px;
      background:#fff;
      border-radius:14px;
      padding:16px;
      transform: translateY(130px);
      transition: transform .6s ease;
      box-shadow: 0 18px 40px rgba(0,0,0,.18);
      overflow:auto;
      border: 1px solid rgba(35,31,46,.08);
    }

    .letterTop{
      display:flex;
      gap:12px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
      margin-bottom: 8px;
    }

    .letter h2{
      margin:0;
      font-family:"Playfair Display", serif;
      font-size: 28px;
      line-height:1.1;
    }

    .photoBox{
      width:110px;
      height:110px;
      border-radius:14px;
      background: rgba(35,31,46,.04);
      border: 1px solid rgba(35,31,46,.10);
      overflow:hidden;
      flex: 0 0 auto;
    }
    .photoBox img{
      width:100%;
      height:100%;
      object-fit:cover;
      object-position:center;
      display:block;
    }

    .letter p{
      margin: 10px 0 0;
      font-size:15px;
      line-height:1.6;
      opacity:.92;
    }

    .letterButtons{
      margin-top:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .letterCloseX{
      position:absolute;
      top: 10px;
      right: 10px;
      width: 42px;
      height: 42px;
      border-radius: 999px;
      border: 1px solid rgba(35,31,46,.12);
      background: rgba(255,255,255,.88);
      cursor:pointer;
      font-weight:900;
      z-index:2;
    }

    .letterWrap.open .flap{
      transform: rotateX(180deg);
    }
    .letterWrap.open .letter{
      transform: translateY(0);
    }

    @media (max-width: 520px){
      .garden{ grid-template-columns: repeat(3, 1fr); }
      .photoBox{ width:92px; height:92px; }
    }
  </style>
</head>

<body>
  <div class="noise"></div>
  <div class="floaters" id="floaters"></div>
  <div class="confetti" id="confetti"></div>

  <div class="wrap">
    <main class="card" id="card">
      <div class="glow"></div>

      <div class="top">
        <div class="badge">
          <span class="dot"></span>
          <span id="badgeText">Hover to reveal tiny love spells</span>
        </div>
        <div class="badge">
          <span>â™¡</span>
          <span id="dateText">Valentineâ€™s Day</span>
        </div>
      </div>

      <h1 id="title">Will you be my Valentine?</h1>
      <p class="sub" id="subtitle">
        click on emojis to find secrets.
      </p>

      <div class="hint">
        <span>Tip</span>
        <kbd>Hover</kbd>
        <span>the tiles to unlock messages</span>
      </div>

      <section class="garden" id="garden"></section>

      <div class="lovebar" aria-label="love meter">
        <div class="fill" id="fill"></div>
      </div>

      <div class="actions">
        <button class="btn yes" id="yesBtn">Are baba Maloome</button>
        <button class="btn maybe" id="noBtn">Na</button>
      </div>

      <div class="footer" id="footer">
        
      </div>
    </main>
  </div>

  <div class="toast" id="toast">
    <span id="toastIcon">ðŸ’—</span>
    <span id="toastText">You found a secret.</span>
  </div>

  <!-- LOVE LETTER -->
  <div class="letterWrap" id="letterWrap" aria-hidden="true">
    <div class="envelope" id="envelope">
      <button class="letterCloseX" id="letterX" aria-label="Close">âœ•</button>
      <div class="flap"></div>
      <div class="body"></div>

      <div class="letter" id="letter">
        <div class="letterTop">
          <div>
            <h2 id="letterTitle">To my love ðŸ’Œ</h2>
            <div style="font-size:13px;opacity:.72;margin-top:6px" id="letterMini">
              Here is your invitation.
            </div>
          </div>

          <!-- Put your image in repo, example: assets/us.jpg -->
          <div class="photoBox" title="Photo">
            <img id="letterPhoto" src="assets/us.jpg" alt="Photo" />
          </div>
        </div>

        <p id="letterText"></p>

        <div class="letterButtons">
          <button class="btn yes" id="letterConfetti">Celebrate</button>
          <button class="btn maybe" id="copyMsg">Copy message</button>
          <button class="btn maybe" id="letterClose">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Customize
    const herName = "Fariba";
    const yourName = "MohammadHossein";
    const dayLabel = "Valentineâ€™s Day";

    // If your image path is different, change it here too
    const photoPath = "assets/we.jpg";

    const hoverNotes = [
      "You are the song i want to listen every day.",
      "You are the girl i want to love every day.",
      "I love your smile so much.",
      "I feel calmer with you.",
      "Youâ€™re fairy in human form",
      "Iâ€™d choose you every time",
      "Youâ€™re my best friend.",
      "Everything is fun with you.",
      "I love the way you dress.",
      "You have the most beautiful eyes",
      "I feel home with you",
      "You make my heart skip beats."
    ];

    const shyLines = [
      "Calm down cutie.",
      "Too slow, sweetheart",
      "You are making me sad",
      "Pleaseeeee....",
      "Oh god make her accept",
      "Abolfazl, make her accept",
      "So what you want to play this game?",
      "Let's play then",
      "I give you one more chance to accept",
      "No more chances im done, accept now."
    ];
    

    const letterMessage = (name) => (
`Dear ${name},

You are invited to special valentines day.
Shanbe Shab, saat 9:
1. Making dinner together
2. Watch movie together.
3. and talk a lot.`
    );

    const titleEl = document.getElementById("title");
    const dateText = document.getElementById("dateText");
    const badgeText = document.getElementById("badgeText");
    const garden = document.getElementById("garden");
    const fill = document.getElementById("fill");
    const toast = document.getElementById("toast");
    const toastText = document.getElementById("toastText");
    const toastIcon = document.getElementById("toastIcon");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const confettiLayer = document.getElementById("confetti");
    const floaters = document.getElementById("floaters");

    const letterWrap = document.getElementById("letterWrap");
    const letterClose = document.getElementById("letterClose");
    const letterConfetti = document.getElementById("letterConfetti");
    const copyMsg = document.getElementById("copyMsg");
    const letterX = document.getElementById("letterX");
    const letterTitle = document.getElementById("letterTitle");
    const letterTextEl = document.getElementById("letterText");
    const letterPhoto = document.getElementById("letterPhoto");

    dateText.textContent = dayLabel;
    titleEl.textContent = "Will you be my Valentine?";

    letterTitle.textContent = `To ${herName} ðŸ’Œ`;
    letterTextEl.textContent = letterMessage(herName);
    letterPhoto.src = photoPath;

    const icons = ["ðŸ’—","âœ¨","ðŸŒ¸","ðŸ’–","ðŸŒ™","ðŸ«¶"];
    let found = new Set();
    let love = 14;

    function showToast(msg, icon="ðŸ’—"){
      toastIcon.textContent = icon;
      toastText.textContent = msg;
      toast.classList.add("show");
      clearTimeout(showToast.t);
      showToast.t = setTimeout(() => toast.classList.remove("show"), 1400);
    }

    function updateLove(){
      const pct = Math.min(100, love);
      fill.style.width = pct + "%";
      if (pct >= 90) badgeText.textContent = "My heart is doing cartwheels";
      else if (pct >= 60) badgeText.textContent = "Keep going... youâ€™re making me melt";
      else badgeText.textContent = "Hover to reveal tiny love spells";
    }

    function makeTile(i){
      const tile = document.createElement("button");
      tile.className = "seed";
      tile.type = "button";

      const icon = document.createElement("span");
      icon.textContent = icons[i % icons.length];

      const note = document.createElement("div");
      note.className = "note";
      note.textContent = hoverNotes[i % hoverNotes.length];

      tile.appendChild(icon);
      tile.appendChild(note);

      tile.addEventListener("mouseenter", () => {
        if (!found.has(i)){
          found.add(i);
          love += 7;
          updateLove();
          showToast(note.textContent, "âœ¨");
          sparkle(tile);
          confettiBurst(18);
        }
      });

      tile.addEventListener("click", () => {
        sparkle(tile);
        showToast("Love note unlocked", "ðŸ’–");
        confettiBurst(22);
      });

      return tile;
    }

    for (let i=0; i<12; i++) garden.appendChild(makeTile(i));
    updateLove();

    function spawnFloater(){
      const el = document.createElement("div");
      el.className = "floater";
      el.textContent = Math.random() > 0.55 ? "â™¡" : "âœ¦";
      const left = Math.random() * 100;
      const size = 14 + Math.random() * 18;
      const duration = 10 + Math.random() * 14;
      el.style.left = left + "vw";
      el.style.fontSize = size + "px";
      el.style.animationDuration = duration + "s";
      el.style.opacity = (0.25 + Math.random() * 0.45).toFixed(2);
      el.style.filter = "blur(" + (Math.random()*0.6).toFixed(2) + "px)";
      floaters.appendChild(el);
      setTimeout(() => el.remove(), duration * 1000);
    }
    for (let i=0; i<20; i++) setTimeout(spawnFloater, i*320);
    setInterval(spawnFloater, 650);

    // NO button (10 dodges, no instant vanish)
    const maxDodges = 10;
    let dodges = 0;
    let noCooldown = false;

function moveNoButton(){
  const cardEl = document.getElementById("card");
  const card = cardEl.getBoundingClientRect();
  const btn = noBtn.getBoundingClientRect();

  const pad = 14;

  // Allowed area INSIDE the card (relative coordinates)
  const minX = pad;
  const maxX = Math.max(pad, card.width - btn.width - pad);

  const minY = 150; // keep it below the title area
  const maxY = Math.max(minY, card.height - btn.height - 24);

  const x = Math.floor(minX + Math.random() * (maxX - minX));
  const y = Math.floor(minY + Math.random() * (maxY - minY));

  // Keep it inside the card
  noBtn.style.position = "absolute";
  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
  noBtn.style.zIndex = 9;
}

    function vanishNoButton(){
      sparkle(noBtn);
      confettiBurst(90);
      showToast("Nope ran away... only yes remains", "ðŸ’ž");
      noBtn.style.pointerEvents = "none";
      noBtn.style.opacity = "0";
      noBtn.style.transform = "scale(0.92)";
      setTimeout(() => { noBtn.style.display = "none"; }, 240);
    }

    function handleNoAttempt(){
      if (noCooldown) return;
      noCooldown = true;
      setTimeout(() => (noCooldown = false), 220);

      dodges++;
      love += 3;
      updateLove();

      showToast(shyLines[Math.min(dodges - 1, shyLines.length - 1)], "ðŸ«¶");
      sparkle(document.getElementById("card"));

      if (dodges < maxDodges){
        noBtn.style.pointerEvents = "none";
        moveNoButton();
        setTimeout(() => (noBtn.style.pointerEvents = "auto"), 140);
      } else {
        setTimeout(vanishNoButton, 260);
      }
    }

 noBtn.addEventListener("pointerenter", (e) => {
  e.preventDefault();
  handleNoAttempt();
});

noBtn.addEventListener("click", (e) => {
  e.preventDefault();
  handleNoAttempt();
});


    // YES opens letter
    yesBtn.addEventListener("click", () => {
      love = 100;
      updateLove();
      openLetter();
    });

    function openLetter(){
      letterWrap.classList.add("show");
      letterWrap.setAttribute("aria-hidden","false");
      setTimeout(() => letterWrap.classList.add("open"), 180);
      confettiBurst(170);
      sparkle(document.getElementById("card"));
      showToast("A letter for you", "ðŸ’Œ");
    }

    function closeLetter(){
      letterWrap.classList.remove("open");
      setTimeout(() => {
        letterWrap.classList.remove("show");
        letterWrap.setAttribute("aria-hidden","true");
      }, 420);
    }

    letterClose.addEventListener("click", closeLetter);
    letterX.addEventListener("click", closeLetter);

    letterWrap.addEventListener("click", (e) => {
      if (e.target === letterWrap) closeLetter();
    });

    letterConfetti.addEventListener("click", () => confettiBurst(150));

    copyMsg.addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(letterMessage(herName));
        showToast("Copied", "âœ¨");
        confettiBurst(60);
      }catch{
        showToast("Take screenshots", "ðŸŒ¸");
      }
    });

    // Sparkle effect
    function sparkle(target){
      const r = target.getBoundingClientRect();
      for (let i=0; i<12; i++){
        const s = document.createElement("div");
        s.textContent = Math.random() > 0.5 ? "âœ¨" : "ðŸ’—";
        s.style.position = "fixed";
        s.style.left = (r.left + r.width*0.15 + Math.random()*r.width*0.7) + "px";
        s.style.top = (r.top + r.height*0.15 + Math.random()*r.height*0.7) + "px";
        s.style.fontSize = (12 + Math.random()*18) + "px";
        s.style.opacity = "0.96";
        s.style.pointerEvents = "none";
        s.style.zIndex = 25;
        s.style.transition = "transform .7s ease, opacity .7s ease";
        document.body.appendChild(s);

        requestAnimationFrame(() => {
          s.style.transform = "translateY(-20px) scale(0.9)";
          s.style.opacity = "0";
        });

        setTimeout(() => s.remove(), 740);
      }
    }

    // Confetti
    function confettiBurst(n=120){
      const colors = [
        "rgba(255,61,127,.95)",
        "rgba(124,58,237,.95)",
        "rgba(255,200,221,.95)",
        "rgba(255,255,255,.92)",
        "rgba(255,122,166,.95)"
      ];

      for (let i=0; i<n; i++){
        const p = document.createElement("div");
        p.className = "piece";
        p.style.left = (Math.random() * 100) + "vw";
        p.style.top = (-10 - Math.random()*20) + "vh";
        p.style.background = colors[Math.floor(Math.random()*colors.length)];
        p.style.transform = "translateY(0) rotate(" + (Math.random()*360) + "deg)";
        p.style.animationDuration = (2.7 + Math.random()*2.3) + "s";
        p.style.animationDelay = (Math.random()*0.25) + "s";
        p.style.width = (8 + Math.random()*10) + "px";
        p.style.height = (10 + Math.random()*16) + "px";
        confettiLayer.appendChild(p);
        setTimeout(() => p.remove(), 5200);
      }
    }
  </script>
</body>
</html>
